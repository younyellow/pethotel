
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="description" content="" />
<meta name="author" content="" />
<title>Agency - Start Bootstrap Theme</title>
<!-- Favicon-->
<link rel="icon" type="image/x-icon" href="img/favicon.ico" />
<!-- Font Awesome icons (free version)-->
<script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js"
	crossorigin="anonymous"></script>
<!-- Google fonts-->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700"
	rel="stylesheet" type="text/css" />
<link
	href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700"
	rel="stylesheet" type="text/css" />
<!-- Core theme CSS (includes Bootstrap)-->
<link href="css/styles.css" rel="stylesheet" />
</head>
<body id="page-top">
	<!-- Navigation-->
	<nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
		<div class="container" style="margin-left:250px">
			<a class="navbar-brand" href="/mainpage"><img
				src="/img/Hue_Mung.svg" alt="..." /></a>
			<button class="navbar-toggler" type="button"
				data-bs-toggle="collapse" data-bs-target="#navbarResponsive"
				aria-controls="navbarResponsive" aria-expanded="false"
				aria-label="Toggle navigation">
				Menu <i class="fas fa-bars ms-1"></i>
			</button>
			<div class="collapse navbar-collapse" id="navbarResponsive">
				<ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
					<li class="nav-item"><a class="nav-link">SiHyun</a></li>
					<li class="nav-item"><a class="nav-link">JunHo</a></li>
					<li class="nav-item"><a class="nav-link">EunJi</a></li>
					<li class="nav-item"><a class="nav-link">YoungSak</a></li>
					<li class="nav-item"><a class="nav-link">HeonGyu</a></li>
					<li class="nav-item"><a class="nav-link">Ara</a></li>
					<li class="nav-item"><a class="nav-link">YongSuk</a></li>
				</ul>

			</div>
			
		</div>
			<div th:if="${#strings.isEmpty(session.user)}"
				style="text-align: right;">
				<a style="color: white; " href="/userregist"
					class="btn">회원가입</a>
			</div>
			<div th:if="${#strings.isEmpty(session.user)}"
				style="text-align: right; color: white">
				<a href="/login.do" style="color: white" class="btn">login</a>
			</div>
			<div th:unless="${#strings.isEmpty(session.user)}"
				style="text-align: right ;color: white">
				<b style="color: white">[[${session.user.userName}]]</b>님 환영합니다. <a href="/logout.do"
					style="color: white" class="btn">logout</a>
			</div>
	
	</nav>
	
	<!-- company_info_detail -->
	<section class="page-section bg-light" id="portfolio">
		<form action="" method="POST" id="frm" name="frm">
			<!--   <input type="hidden" name="companyIdx" th:value="${detail.companyIdx}" />  -->
			
			<!-- 콘테이너 시작 -->
			<div class="container" style="max-width:1920px; width:100%; margin:0 auto;">
				<!-- 업체명 사진/업체 정보/오시는길 시작-->
				<div class="text-center">
					<h2 class="section-heading text-uppercase company-name" style="font-size:4em">[[${companydetail.companyName}]]</h2>
				</div>
				<div class="mb-3">
					<div class="picture">
					<img src="/download.do?companyIdx=" th:attrappend="src=${reviewlist1.companyIdx}"></img></div>
					
					<div class="content_wrap company-info"
						style="display: flex; align-items: top;">
						<label for="exampleFormControlInput1" class="form-label"
							style="flex-basis: 70px;">업체정보</label>
						<div class="container text-center"
							style="width: 35%; margin: 0 0 0 20px; ">
							<div class="row align-items-start" >
								<div class="col"
									style="background-color: #fff; height:150px;text-align: left; border-radius: 4px;">
									[[${companydetail.companyInfo}]]</div>
							</div>
						</div>
					</div>
					<div class="content_wrap"
						style="display: flex; align-items: center;">
						<label for="exampleFormControlInput1" class="form-label"
							style="flex-basis: 70px;">오시는길</label>
						<div class="container text-center"
							style="width: 35%; margin: 0 0 0 20px;">
							<div class="row align-items-start">
								<div class="col"
									style="background-color: #fff; text-align: left; border-radius: 4px;">
									[[${companydetail.companyAddress}]]</div>
							</div>
						</div>
					
					</div>
				<div class="content_wrap"
						style="display: flex; align-items: center;">
						<label for="exampleFormControlInput1" class="form-label"
							style="flex-basis: 70px;">평점</label>
						<div class="container text-center"
							style="width: 35%; margin: 0 0 0 20px;">
							<div class="row align-items-start">
								<div class="col"
									style="background-color: #fff; text-align: left; border-radius: 4px;">
									[[${averagestar.averageStar}]]</div>
							</div>
						</div>
					
					</div>
				<div class="btn_wrap" style =" margin-left:45%;" >
					<a style="margin-top:30px;"class="btn btn-primary" href="/can.apply123?companyIdx=" 
	                          th:attrappend="href=${reviewlist1.companyIdx}" th:text="예약하기">
	                </a>		
	            </div>
				<div class="btn_wrap">
					<a style="margin-top:30px;" class="btn btn-primary" href="/can.applylist?companyIdx=" 
	                          th:attrappend="href=${reviewlist1.companyIdx}" th:text="예약확인">
	                </a>		
	            </div>
	            <!-- 업체명 사진/업체 정보/오시는길 끝-->
				<!-- 리뷰 컨테이너 시작 -->
				<div class="text-center">
					<h2 class="section-heading text-uppercase">리뷰</h2>
				</div>
				<div th:if="${#lists.size(reviewlist2)} > 0"
					th:each="sample : ${reviewlist2}">

					<div class="mb-3">
							<div class="content_wrap"
								style="display: flex; align-items: center;">
								<label for="exampleFormControlInput1" class="form-label"
									style="flex-basis: 70px;">	<table>
												<tr>
													<td th:text="${sample.reviewWriter}"></td>
												</tr>
											</table>
											</label>
								<div class="container text-center"
									style="width: 35%; margin: 0 0 0 20px;">
									<div class="row align-items-start">
										<div class="col"
											style="background-color: #fff; text-align: left; border-radius: 4px; border: 1px solid #eee">
										<table>
												<tr>
													<td style ="width:600px" th:text="${sample.reviewContents}"></td>
													<td >[[${sample.starIdx}]]점</td>
												</tr>
											</table>
										</div>
									</div>
								</div>
							</div>
							
					</div>
				</div>	
				<!-- 리뷰 컨테이너 끝 -->            
				<!-- 리뷰등록 컨테이너 시작 -->
				<div class="reviewform_container" style="width:100%; margin:0 auto;">
					<div class="text-center">
						<h2 class="section-heading text-uppercase">리뷰등록</h2>
						<!-- <h3 class="section-subheading text-muted">Lorem ipsum dolor sit amet consectetur.</h3> -->
					</div>
					<!--  인덱스값 넘기는거 -->
						<div style="margin-left:560px;">
							<div> 예약 번호</div>
					<th:block  th:each="c:${applyDto}">	
				
						<input  type="radio" name="applyIdx" th:value="${c.applyIdx}" th:text="${c.applyIdx}"/>
					</th:block>
						</div>
					<div class="mb-3">
						<div class="content_wrap"
							style="display: flex; align-items: center;">
							<label for="exampleFormControlInput1" class="form-label"
								style="flex-basis: 70px;">작성자</label>
							<div class="container text-center"
								style="width: 70%; margin: 0 0 0 20px;">
								<div class="row align-items-start">
									<input type="text" class="form-control" name="reviewWriter" style="margin: 0; width: 56%;"/>
									<!--    <div class="col" style="background-color: #fff; text-align: left;  border-radius: 4px;">
		                                One of three columns
		                            </div> -->
								</div>
							</div>
						</div>
					</div>
					<div class="mb-3">
						<div class="content_wrap"
							style="display: flex; align-items: center;">
							<label for="exampleFormControlTextarea1" class="form-label"
								style="flex-basis: 70px;">내용</label>
							<div class="container text-center"
								style="width: 70%; margin: 0 0 0 20px;">
								<div class="row align-items-start">
									<textarea name="reviewContents" class="form-control" row=5 style="margin:0; width: 56%;"></textarea>
									<!-- <div class="col" style="background-color: #fff; text-align: left;  border-radius: 4px;">
		                                One of three columns
		                            </div> -->
								</div>
							</div>
						</div>
					</div>


					<style>
						.star label:hover {
						    text-shadow: 0 0 0 yellow; 
						}
						.btn_wrap label:hover ~ label {
							text-shadow: 0 0 0 yellow; 
						}
						.btn_wrap input[type=radio]:checked ~ label {
						 	text-shadow: 0 0 0 yellow; 
						}
						
						.star {
						 display: inline-block;
						 border: 0;
						 direction: rtl;
						}
						.star input{
						 display: none;
						}
						.star label{
						   font-size: 3em;
						   color: transparent;
						   text-shadow: 0 0 0 #f0f0f0;
						}
					</style>
					<div class="btn_wrap" style="margin-left:29%">
						<div class="star">
						<th:block  th:each="c : ${star}">
						
							<input type="radio" name="starIdx" th:value="6-${c.starIdx}" id=""th:attrappend="id=${c.starIdx}"/>
							<label   for="" th:attrappend="for=${c.starIdx}">⭐</label>
						</th:block>
						</div>
					</div>
					<div class="btn_wrap btn-regist" style="margin-left:48%;">
						<input type="hidden" name="companyIdx"
							th:value="${reviewlist1.companyIdx}" />
						<!--   
		                  	<a href="/insertCompanyReview?companyIdx=" class="btn btn-primary write" th:attrappend="href=${reviewlist1.companyIdx}">리뷰등록</a>
		                  	-->
						<input type="button" id="list"
							class="btn btn-primary btn-registration  " value="등록하기" style="margin: 0 auto;"/>
					</div>
					
				</div>
				<!-- 리뷰등록 컨테이너 끝 -->	            
			</div>
			
		</form>
	</section>

	<!-- Footer-->
	<footer class="footer py-4">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-lg-4 text-lg-start">	&copy; Copyright <strong><span>애물단지</span></strong>. All
				Rights Reserved</div>
			</div>
		</div>
	</footer>
	
	<!-- Bootstrap core JS-->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
	<!-- Core theme JS-->
	<script src="js/scripts.js"></script>
	<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
	<!-- * *                               SB Forms JS                               * *-->
	<!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
	<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
	<script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
	<script>
		// 문서 전체가 로딩되었을 때 실행되는 코드
		$(function() {
			// id 속성의 값이 list인 엘리먼트가 클릭되었을 때 동작을 정의
			$('#list').on('click', function() {
				let frm = $('#frm')[0];
				console.log(frm);
				frm.action = '/insertCompanyReview';
				frm.submit();
			});
		});
	</script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
            crossorigin="anonymous"></script>
        <script>
            let message = "[[${session.message}]]";
            if (message) {
                alert(message);
                document.getElementById("userId").focus();
            }
           
        </script>
 	<th:block th:if="${session.message} != null">
 			<th:block th:inline="text">[[${#session.removeAttribute('message')}]]</th:block>
 		</th:block>
</body>
</html>
